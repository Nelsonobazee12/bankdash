import{r as o,B as W,j as e,n as T}from"./index-ColvAVKK.js";import{G as i,b as w,a as y,I as a}from"./IconifyIcon-CxUZa_KV.js";import{e as c,D as E}from"./TextField-BFje14yO.js";import{a as d}from"./Button-Do0lZLqZ.js";import{B}from"./Box-CoaRwdjk.js";import{S}from"./Stack-CCddgmPS.js";import{C as A}from"./Container-CwEBs45c.js";import{C as D}from"./Card-DtesVOnE.js";import{T as p,L as R}from"./Link-B582eoDv.js";import"./Portal-Db6_yy5Z.js";import"./styled-qK_CVH7A.js";const U="https://yourbackend.loca.lt",F=()=>{const[u,v]=o.useState(!1),[h,b]=o.useState(!1),[s,C]=o.useState({name:"",email:"",password:"",confirmPassword:""}),[f,x]=o.useState(null),[j,g]=o.useState(null),{up:P}=W(),r=P("sm"),l=n=>{const{name:t,value:m}=n.target;C(I=>({...I,[t]:m}))},k=n=>{if(n.preventDefault(),s.password!==s.confirmPassword){x("Passwords do not match.");return}fetch(`${U}/api/v1/registration/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,email:s.email,password:s.password})}).then(t=>{if(!t.ok)throw new Error("Registration failed. Please try again later.");return t.json()}).then(t=>{const{access_token:m}=t;if(m)z(m),g("Registration successful! Please confirm your email"),setTimeout(()=>{g(null)},2e3);else throw new Error("Authentication token or refresh token is missing or invalid.")}).catch(t=>{console.error("Error:",t),x("Registration failed."),setTimeout(()=>{x(null)},2e3)})},z=n=>{T.set("accessToken",n,{expires:1})};return e.jsxs("form",{onSubmit:k,children:[e.jsxs(i,{container:!0,spacing:3,sx:{mb:2.5},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,size:r?"medium":"small",name:"name",label:"User Name",type:"text",value:s.name,onChange:l})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,size:r?"medium":"small",name:"email",label:"Email address",type:"email",value:s.email,onChange:l})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,size:r?"medium":"small",name:"password",label:"Password",type:u?"text":"password",value:s.password,onChange:l,InputProps:{endAdornment:e.jsx(w,{position:"end",children:e.jsx(y,{onClick:()=>v(!u),edge:"end",children:e.jsx(a,{icon:u?"majesticons:eye":"majesticons:eye-off"})})})}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,size:r?"medium":"small",name:"confirmPassword",label:"Confirm Password",type:h?"text":"password",value:s.confirmPassword,onChange:l,InputProps:{endAdornment:e.jsx(w,{position:"end",children:e.jsx(y,{onClick:()=>b(!h),edge:"end",children:e.jsx(a,{icon:h?"majesticons:eye":"majesticons:eye-off"})})})}})})]}),e.jsx(d,{fullWidth:!0,size:r?"large":"medium",type:"submit",variant:"contained",color:"primary",children:"Sign Up"}),j&&e.jsx("p",{children:j}),f&&e.jsx("p",{children:f})]})},Q=()=>e.jsx(B,{sx:{width:1,position:"relative",zIndex:100},children:e.jsx(S,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsx(A,{maxWidth:"sm",children:e.jsxs(D,{sx:{p:{xs:3,sm:5},width:1},children:[e.jsx(p,{variant:"h4",children:"Sign Up"}),e.jsxs(p,{sx:{mt:2,mb:{xs:3,sm:5},fontSize:{xs:"subtitle1.fontSize",sm:"body2.fontSize"}},children:["Already have an account?",e.jsx(R,{href:"/authentication/login",variant:"subtitle2",sx:{ml:.75,"&:hover":{color:"primary.light"}},children:"Sign In Now!"})]}),e.jsxs(S,{direction:"row",spacing:{xs:1,sm:2},children:[e.jsx(d,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"eva:google-fill",color:"error.main"})}),e.jsx(d,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"gg:facebook",color:"primary.main",width:22})}),e.jsx(d,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"logos:twitter"})})]}),e.jsx(E,{sx:{my:3},children:e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"OR"})}),e.jsx(F,{})]})})})});export{Q as default};
