import{r as i,B as z,j as e,n as I}from"./index-ColvAVKK.js";import{G as o,b as E,a as L,I as a}from"./IconifyIcon-CxUZa_KV.js";import{e as j,D as T}from"./TextField-BFje14yO.js";import{L as w,T as m}from"./Link-B582eoDv.js";import{a as l}from"./Button-Do0lZLqZ.js";import{B as W}from"./Box-CoaRwdjk.js";import{S as g}from"./Stack-CCddgmPS.js";import{C as B}from"./Container-CwEBs45c.js";import{C as D}from"./Card-DtesVOnE.js";import"./Portal-Db6_yy5Z.js";import"./styled-qK_CVH7A.js";const P="https://yourbackend.loca.lt",F=()=>{const[c,y]=i.useState(!1),[r,v]=i.useState({email:"",password:""}),[u,h]=i.useState(null),[x,p]=i.useState(null),{up:b}=z(),d=b("sm"),f=t=>{const{name:s,value:n}=t.target;v(C=>({...C,[s]:n}))},S=t=>{t.preventDefault(),fetch(`${P}/api/v1/registration/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,password:r.password})}).then(s=>{if(!s.ok)throw new Error("Login Faild, Check Your Email");return s.json()}).then(s=>{const{access_token:n}=s;if(n)k(n),p("Login successful!"),window.location.href="/",setTimeout(()=>{p(null)},2e3);else throw new Error("Authentication token or refresh token is missing or invalid.")}).catch(s=>{console.error("Error:",s),h("Login failed."),setTimeout(()=>{h(null)},2e3)})},k=t=>{console.log("Setting cookie with token:",t),I.set("accessToken",t,{expires:1})};return e.jsxs("form",{onSubmit:S,children:[e.jsxs(o,{container:!0,spacing:3,sx:{mb:2.5},children:[e.jsx(o,{item:!0,xs:12,children:e.jsx(j,{fullWidth:!0,size:d?"medium":"small",name:"email",label:"Email address",value:r.email,onChange:f})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(j,{fullWidth:!0,size:d?"medium":"small",name:"password",label:"Password",type:c?"text":"password",value:r.password,onChange:f,InputProps:{endAdornment:e.jsx(E,{position:"end",children:e.jsx(L,{onClick:()=>y(!c),edge:"end",children:e.jsx(a,{icon:c?"majesticons:eye":"majesticons:eye-off"})})})}})})]}),e.jsx(o,{container:!0,justifyContent:"flex-end",sx:{my:3},children:e.jsx(o,{item:!0,children:e.jsx(w,{href:"/authentication/forget-password",variant:"subtitle2",underline:"hover",children:"Forgot password?"})})}),e.jsx(l,{fullWidth:!0,size:d?"large":"medium",type:"submit",variant:"contained",color:"primary",children:"Login"}),x&&e.jsx("p",{children:x}),u&&e.jsx("p",{children:u})]})},q=()=>e.jsx(W,{sx:{width:1,position:"relative",zIndex:100},children:e.jsx(g,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsx(B,{maxWidth:"sm",children:e.jsxs(D,{sx:{p:{xs:3,sm:5},width:1},children:[e.jsx(m,{variant:"h4",children:"Sign In"}),e.jsxs(m,{variant:"body2",sx:{mt:2,mb:{xs:3,sm:5},fontSize:{xs:"subtitle1.fontSize",sm:"body2.fontSize"}},children:["Donâ€™t have an account?",e.jsx(w,{href:"/authentication/sign-up",variant:"subtitle2",sx:{ml:.75,"&:hover":{color:"primary.light"}},children:"Create One Now!"})]}),e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2},children:[e.jsx(l,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"eva:google-fill",color:"error.main"})}),e.jsx(l,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"gg:facebook",color:"primary.main",width:22})}),e.jsx(l,{fullWidth:!0,size:"large",color:"neutral",variant:"outlined",sx:{p:1},children:e.jsx(a,{icon:"logos:twitter"})})]}),e.jsx(T,{sx:{my:3},children:e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"OR"})}),e.jsx(F,{})]})})})});export{q as default};
